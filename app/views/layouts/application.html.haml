!!! 5
%html
  %head
    %meta(content='text/html' charset='utf-8' http-equiv='Content-Type')
    %meta(name='viewport' content='width=device-width')
    %title= full_title(yield(:title))
    = csrf_meta_tags
    = stylesheet_link_tag    'application', media: 'all', |
      'data-turbolinks-track': 'reload'                   |
    = javascript_include_tag 'application', 'data-turbolinks-track': 'reload'
    /[if lt IE 9]
      <script src='//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.min.js'>
      </script>
  %body(id='#{controller_name}-#{action_name}')
    - if logged_in? # Page navigation is visible after logging in, not on login screen, etc.
      #top-bar
        #logo.logo
          CS 1332 A
        .logged-in-as
          Logged in as
          = link_to(@current_user) do
            = @current_user.username
            - if is_instructor?
              (instructor)
          \-
          = link_to(logout_path, method: "delete") do
            = fa_icon "sign-out"
            logout
      %nav#menu
        %hr
        %ul
          %li
            = link_to('/home') do
              = fa_icon "home fw"
              Home
          %li
            = link_to('/questions') do
              = fa_icon "question-circle fw"
              Questions
          %li
            = link_to('/statistics') do
              = fa_icon "bar-chart-o fw"
              Statistics
          - if is_instructor?
            %li
              = link_to('/users') do
                = fa_icon "th-list fw"
                Roster
          %li
            %a{:href => '#'}
              = fa_icon "cog fw"
              Settings
        %hr
    #content.container
      #modal-window.modal.hide.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog"}
      = link_to 'Add release', popup_question_path,  {:remote => true, 'data-toggle' =>  "modal", 'data-target' => '#modal-window'}
      - if check_privilege(controller_name, action_name)
        = yield
      - else
        = controller.redirect_to action: 'login', controller: 'login'
